{% extends "rumix/base.html" %}
{% load static %}
{% block title %}Meu Perfil | Rumix{% endblock %}
{% block content %}
<div class="container py-4" style="max-width: 600px;">
    <h1 class="mb-4 text-center">Meu Perfil</h1>
    <div class="card shadow p-4 text-center">

        <!-- FOTO ainda errada -->
        <div class="d-flex justify-content-center mb-3">
            {% if user.foto_perfil %}
                <img src="{{ user.foto_perfil.url }}" 
                     class="rounded-circle" 
                     style="height:140px; width:140px; object-fit:cover;">
            {% else %}
                <img src="{% static 'img/default_user.png' %}" 
                     class="rounded-circle" 
                     style="height:140px; width:140px; object-fit:cover;">
            {% endif %}
        </div>

        <!-- NOME / EMAIL -->
        <h3 class="mb-1">{{ user.first_name }} {{ user.last_name }}</h3>
        <p class="text-muted mb-3">{{ user.email }}</p>
        <hr>

        <!-- DADOS EXTRAS -->
        <div class="text-start">
            <p><strong>Usuário:</strong> {{ user.username }}</p>
            {% if user.cargo %}<p><strong>Cargo:</strong> {{ user.cargo }}</p>{% endif %}
            {% if user.telefone %}<p><strong>Telefone:</strong> {{ user.telefone }}</p>{% endif %}
            {% if user.endereco %}<p><strong>Endereço:</strong> {{ user.endereco }}</p>{% endif %}
        </div>
        <hr>

        <!-- BOTÕES -->
        <div class="d-flex justify-content-center gap-2">
            <a href="{% url 'usuarios:editar_perfil' %}" class="btn btn-primary">Editar Perfil</a>
            <a href="{% url 'usuarios:password_change' %}" class="btn btn-outline-secondary">Trocar Senha</a>
        </div>
    </div>
</div>
{% endblock %}
